# HTTPμ λ¬΄μƒνƒμ„±κ³Ό λΉ„μ—°κ²°μ„±

# λ¬΄μƒνƒμ„±(Stateless)

**λ¬΄μƒνƒμ„±**μ€ μ°μ„  ν•λ§λ””λ΅ μ •μν•μλ©΄ **ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ μƒνƒλ¥Ό μ μ§€ν•μ§€ μ•λ” κ²ƒ**μ„ μλ―Έν•λ‹¤.

μ΄κ² λ¬΄μ¨ λ§μΈκ°€ ν•λ©΄, μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ”μ²­μ„ λ°›μΌλ©΄ μ‘λ‹µμ„ λ³΄λ‚΄λ” μ—­ν• λ§ μν–‰ν•κ³ ,

μƒνƒ κ΄€λ¦¬λ” μ „μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ—κ² μ±…μ„μ΄ μλ‹¤λ” κ²ƒμ΄λ‹¤.

μ¦‰, μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ •λ³΄λ¥Ό κΈ°μ–µν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ΄λ‹¤. β†’ μ΄λ΅ μΈν•΄ μ—¬λ¬ μ„λ²„μ—μ„ μ‘λ‹µμ΄ κ°€λ¥ν•¨.

μμ‹)

<aside>
π’΅ μ†λ‹ : μ†μ„¤μ±… μ„μΉλ¥Ό μ•κ³  μ‹¶μ–΄μ”.

μ§μ›A : μ†μ„¤μ±…μ€ C5κµ¬μ—­μ— μμµλ‹λ‹¤.

μ†λ‹ : C5 κµ¬μ—­μ— μλ” μ†μ„¤μ±… 2κ¶ κµ¬λ§¤ν• κ²μ”.

μ§μ›B : μ†μ„¤μ±… 2κ¶ 30,000μ›μ…λ‹λ‹¤.

μ†λ‹ : C5 κµ¬μ—­μ— μλ” μ†μ„¤μ±… 2κ¶ κµ¬λ§¤ν• κ²μ”. ν„κΈμΌλ΅ κ²°μ  ν• κ²μ”.

μ§μ›C : κ²°μ  λμ—μµλ‹λ‹¤.

</aside>

μ„μ μμ‹μ—μ„ μ§μ›(μ„λ²„)λ“¤μ€ μ†λ‹μ΄ λ¬΄μ¨ μ±…μ„ μ°Ύλ”μ§€, λ¬΄μ¨ μ±…μ„ κµ¬λ§¤ν•μ€λ”μ§€ κΈ°μ–µν•μ§€ λ»ν•λ‹¤.

ν•μ§€λ§, μ†λ‹(ν΄λΌμ΄μ–ΈνΈ)μ΄ μμ‹ μ ν–‰λ™μ„ κΈ°μ–µν•κ³  μλ‹¤λ©΄ μ¤‘κ°„μ— λ‹¤λ¥Έ μ§μ›μΌλ΅ λ°”λ€μ–΄λ„ μ±…μ„ μ°Ύκ³  κ·Έ μ±…μ„ κµ¬λ§¤ν•  μ μλ‹¤λ” κ²ƒμ΄λ‹¤.

### λ¬΄μƒνƒμ„±μ μ¥λ‹¨μ  λ° νΉμ§•

### μ¥μ 

- **λ…λ¦½μ μΈ μ”μ²­ μ²λ¦¬ -** μ„λ²„λ” κ° μ”μ²­μ„ λ³„κ°μ λ…λ¦½μ μΈ μ΄λ²¤νΈλ΅ κ°„μ£Όν•λ©°, ν• μ”μ²­μ μ²λ¦¬κ°€ λλ‚λ©΄ κ·Έ μ”μ²­μ— λ€ν• λ¨λ“  μ •λ³΄λ” μ‚¬λΌμ§„λ‹¤.
- **μ„±λ¥ μµμ ν™”** - μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄λ¥Ό κΈ°μ–µν•  ν•„μ”κ°€ μ—†κΈ° λ•λ¬Έμ—, λ§μ€ μ‚¬μ©μμ μ”μ²­μ„ λΉ λ¥΄κ² μ²λ¦¬ν•  μ μλ‹¤.
- **ν™•μ¥μ„±** - μƒνƒ μ •λ³΄κ°€ μ—†κΈ° λ•λ¬Έμ—, μ”μ²­μ€ μ–΄λ μ„λ²„μ—μ„λ„ μ²λ¦¬λ  μ μλ‹¤. μ΄λ” [λ΅λ“ λ°Έλ°μ‹±](https://aws.amazon.com/ko/what-is/load-balancing/)κ³Ό [λ¶„μ‚° μ‹μ¤ν…](https://www.atlassian.com/ko/microservices/microservices-architecture/distributed-architecture)μ—μ„μ ν™•μ¥μ„±μ„ ν–¥μƒ μ‹ν‚¨λ‹¤.

 

### λ‹¨μ 

- **μƒνƒ μ μ§€μ ν•„μ”μ„±** - λ§μ€ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„λ” μ‚¬μ©μμ μƒνƒ μ •λ³΄(ex. λ΅κ·ΈμΈ μƒνƒ, μ¥λ°”κµ¬λ‹μ μ•„μ΄ν…λ“¤ λ“±)λ¥Ό μ μ§€ν•΄μ•Ό ν•λ‹¤. HTTPμ λ¬΄μƒνƒμ„±μΌλ΅ μΈν•΄ μ΄λ° μƒνƒ μ •λ³΄μ μ μ§€κ°€ μ§€μ›λμ§€ μ•λ”λ‹¤. β†’ μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„λ”?

## μƒνƒμ μ§€(Stateful)

**μƒνƒ μ μ§€**λ” λ¬΄μƒνƒμ„±(stateless)κ³Όλ” λ°λ€λ΅ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ”μ²­μ„ λ°›μ€ **μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό λ³΄μ΅΄**ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤.

β†’ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈκ°€ **μ΄μ „ λ‹¨κ³„λ“¤μ—μ„ μ κ³µν• κ°’λ“¤μ„ μ €μ¥ν•κ³  λ‹¤μ λ‹¨κ³„μ—μ„λ„ μ €μ¥ν• μƒνƒ**μ„

μμ‹)

<aside>
π’΅ μ†λ‹ : μ†μ„¤μ±… μ„μΉλ¥Ό μ•κ³  μ‹¶μ–΄μ”.

μ§μ›A : μ†μ„¤μ±…μ€ C5κµ¬μ—­μ— μμµλ‹λ‹¤.

μ†λ‹ : 2κ¶ κµ¬λ§¤ν• κ²μ” μ–Όλ§μΈκ°€μ”?

μ§μ›A : 30,000μ›μ…λ‹λ‹¤.    (C5κµ¬μ—­μ— μλ” μ†μ„¤μ±… 2κ¶ λ³΄μ΅΄)

μ†λ‹ : C5 κµ¬μ—­μ— μλ” μ†μ„¤μ±… 2κ¶ κµ¬λ§¤ν• κ²μ”. ν„κΈμΌλ΅ κ²°μ  ν• κ²μ”.

μ§μ›A : κ²°μ  λμ—μµλ‹λ‹¤.   (C5κµ¬μ—­μ— μλ” μ†μ„¤μ±… 2κ¶ ν„κΈμΌλ΅ κ²°μ  λ³΄μ΅΄)

</aside>

λ¬΄μƒνƒμ„±μ μμ‹μ™€ λ‘κ°™μ€ μμ‹λ΅ λ“¤μ–΄λ³΄λ©΄,

statelessλ” μƒνƒλ¥Ό λ³΄μ΅΄ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ—¬λ¬ μ„λ²„(ex.μ—¬λ¬ μ§μ›)μ—μ„ μ²λ¦¬κ°€ κ°€λ¥ ν–λ λ°λ©΄μ—, 

**statefulμ€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό μ¤μ§ ν•λ‚μ μ„λ²„μ—μ„λ§ μ €μ¥**ν•κ³  μλ‹¤. 

λ€ν‘μ μΌλ΅λ” μ›Ήμ‚¬μ΄νΈμ—μ„ λ΅κ·ΈμΈμ„ ν•λ©΄ νμ΄μ§€λ¥Ό μ΄λ™ν•΄λ„ λ΅κ·ΈμΈμ΄ ν’€λ¦¬μ§€ μ•κ³  κ³„μ† μ μ§€λλ” κ²ƒμ΄ λ°”λ΅ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό μ μ§€ν•κ³  μμΌλ‹κΉ κ°€λ¥ν• κ²ƒμ„.

β†’ μ΄λ¬ν• ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ •λ³΄λ¥Ό **μΏ ν‚¤λ‚ μ„Έμ… νΉμ€ ν† ν°μ— μ €μ¥ν•μ—¬ μƒνƒλ¥Ό μ μ§€**ν•¨.

![μ›Ήμ‚¬μ΄νΈμ—μ„ κ°λ°μ λ„κµ¬λ¥Ό μ—΄μ–΄μ„ μ„Έμ…μ„ ν™•μΈν•΄λ³΄λ©΄ λ΅κ·ΈμΈμ„ ν• μ •λ³΄κ°€ μ„Έμ…μ— μ €μ¥λμ–΄ μμ.](https://prod-files-secure.s3.us-west-2.amazonaws.com/5dfd688f-df73-4aa1-b016-d479762c28f9/1088f6f9-ca78-4f8b-a5de-45dae7d7217e/Untitled.png)

μ›Ήμ‚¬μ΄νΈμ—μ„ κ°λ°μ λ„κµ¬λ¥Ό μ—΄μ–΄μ„ μ„Έμ…μ„ ν™•μΈν•΄λ³΄λ©΄ λ΅κ·ΈμΈμ„ ν• μ •λ³΄κ°€ μ„Έμ…μ— μ €μ¥λμ–΄ μμ.

### μƒνƒ μ μ§€μ λ¬Έμ μ 

- λ§μ•½ λ€λ‰μ νΈλν”½μΌλ΅ μΈν•΄ μ„λ²„λ¥Ό μ¦μ„¤ μ‹μΌ°κ³ , κ·Έ μ¦μ„¤λ λ‹¤λ¥Έ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ΄μ–΄ λ°›λ”λ‹¤κ³  κ°€μ •ν•΄λ³΄μ.
- λ‹¤λ¥Έ μ„λ²„κ°€ μ”μ²­μ„ μ΄μ–΄ λ°›μΌλ ¤λ©΄ κ·Έ μ΄μ „μ μ”μ²­λ“¤μ΄ μ €μ¥μ΄ λμ–΄ μμ§€ μ•μ€ μƒνƒ β†’ λ¬Έμ  λ°μƒ

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/5dfd688f-df73-4aa1-b016-d479762c28f9/35d5e0b1-499d-413e-be9f-13fa409bb960/Untitled.png)

ν΄λΌμ΄μ–ΈνΈ μƒνƒλ“¤μ„ μ €μ¥ ν•κ³  μμΌλ‹ μ©λ‰ ν•κ³„ μ΅΄μ¬

- ν„μ—…μ—μ„λ” μ΄λ¬ν• ν΄λΌμ΄μ–ΈνΈ μƒνƒ λ°μ΄ν„°λ¥Ό μΊμ‹ μ„λ²„(Redis)μ— μ €μ¥ν•μ—¬ μ΄μ©ν•¨.

---

# λΉ„μ—°κ²°μ„±(Connectionless)

!https://blog.kakaocdn.net/dn/BIhCp/btrRdeNxWNb/0f8qCi0nSs2C8og5l9zZ9k/img.png

HTTP ν”„λ΅ν† μ½μ νΉμ„±μΈ **λΉ„μ—°κ²°μ„±**μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄λ©΄ μ„λ²„λ” **ν΄λΌμ΄μ–ΈνΈμ—κ² ν•΄λ‹Ή μ‘λ‹µμ„ λ³΄λ‚΄κ³ , κ·Έ ν›„ ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ λλ” κ²ƒ**μ„ λ§ν•λ‹¤.

### ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ—°κ²°μ„ κ³„μ† μ μ§€ν•λ‹¤λ©΄ ? (μ—°κ²°μ„±)

!https://blog.kakaocdn.net/dn/tJOlB/btrRfI7VZTx/OkKyyCfrf1Kt70EZELYzY1/img.png

## λΉ„μ—°κ²°μ„± μ¥λ‹¨μ  λ° νΉμ§•

### μ¥μ 

- **λ¦¬μ†μ¤ ν¨μ¨** - μ—°κ²°μ„ κ³„μ† μ μ§€ν•λ” κ²ƒλ³΄λ‹¤ λ§μ€ μμ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μμ°¨μ μΌλ΅ λΉ λ¥΄κ² μ²λ¦¬ν•μ—¬ λ¦¬μ†μ¤λ¥Ό ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.
- **λ™μ‹ μ ‘μ†μ μ²λ¦¬** - λ€λ‰μ λ™μ‹ μ ‘μ†μμ— λ€ν•΄ μ—°κ²°μ„ μ μ§€ν•  ν•„μ”κ°€ μ—†μΌλ―€λ΅, λ§μ€ μμ λ™μ‹ μ ‘μ†μλ¥Ό μ²λ¦¬ν•  μ μμ.

### λ‹¨μ 

- **μƒνƒ μ μ§€μ μ–΄λ ¤μ›€** - μ—°κ²°μ΄ λμ–΄μ§„ ν›„μ—λ” μ΄μ „ μ”μ²­μ— λ€ν• μ •λ³΄κ°€ μ—†κΈ° λ•λ¬Έμ—, ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό μ μ§€ν•λ” κ²ƒμ΄ μ–΄λ µλ‹¤.
- **μ—°κ²° μ„¤μ •κ³Ό μΆ…λ£ μ¤λ²„ν—¤λ“** - κ° μ”μ²­λ§λ‹¤ μƒλ΅μ΄ μ—°κ²°μ„ μ„¤μ •ν•κ³  μΆ…λ£ν•λ” μ¤λ²„ν—¤λ“κ°€ λ°μƒν•λ‹¤.
    - μ—¬κΈ°μ„ **μ¤λ²„ν—¤λ“**λ€ μ–΄λ–¤ μ²λ¦¬λ¥Ό ν•κΈ° μ„ν•΄ λ“¤μ–΄κ°€λ” κ°„μ ‘μ μΈ μ²λ¦¬λ¥Ό ν•λ” μ‹κ°„μ΄λ‚ λ©”λ¨λ¦¬ λ“±μ„ λ§ν•¨.
    - μ΄λ¬ν• λ¬Έμ λ¥Ό **HTTP Persistent Connections(μμ†μ μΈ μ»¤λ„¥μ…)**μΌλ΅ ν•΄κ²°ν•κ³  μμ.

### HTTP Persistent Connections(μμ†μ μΈ μ»¤λ„¥μ…)

λΉ„μ—°κ²°μ„±μ νΉμ§•μΈ μƒλ΅μ΄ μ—°κ²°μ„ λ§Ίμ„ λ•λ§λ‹¤ λ“λ” μƒλ‹Ήν• μ‹κ°„μ΄ λ“λ” λ¬Έμ λ¥Ό μ™„ν™” μ‹ν‚¤κΈ° μ„ν• λ°©λ²•μ΄λ©°, Keep-AliveλΌκ³ λ„ ν•¨.

ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ **μ—°κ²°μ„ μ—΄μ–΄ λ†“κ³  μ—¬λ¬ μ”μ²­μ— μ¬μ‚¬μ©**μ„ ν•¨μΌλ΅μ¨, μƒλ΅μ΄ TCP/IPμ—°κ²°μ 3 way handshake λΉ„μ©μ„ μ•„λΌκ² λκ³  μ—°κ²°μ μ¤λ²„ν—¤λ“κ°€ κ°μ† ν•¨.

ν•μ§€λ§, μ—°κ²°μ΄ μ—΄λ ¤ μλ” λ™μ• μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ–‘μ½ λ¨λ‘μ—μ„ λ¦¬μ†μ¤(λ©”λ¨λ¦¬, μ†μΌ“)κ°€ μ‚¬μ©λ¨. μ΄λ” **λ§μ€ μμ λ™μ‹ μ—°κ²°μ—μ„λ” λ¦¬μ†μ¤ λ¶€μ΅± λ¬Έμ λ¥Ό μΌμΌν‚¬ μ μμ**.
