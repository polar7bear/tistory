# 명령어와 구조
## 연산 코드와 오퍼랜드
명령어는 '무엇을 대상으로, 어떤 동작을 수행하라'는 구조로 되어있다.  

**명령어**는 연산 코드와 오퍼랜드로 구성되어 있다.  

'명령어가 수행할 연산'을 **연산 코드(operation code)**라 하고, '연산에 사용할 데이터' 또는 '연산에 사용할 데이터가 저장된 위치'를 **오퍼랜드(operand)**라고 한다.  
- 예를 들어, '100과 120을 더해라'에서 '100과'와 '120을' 은 오퍼랜드이며, '더해라'는 연산 코드이다.


연산 코드는 **연산자**, 오퍼랜드는 **피연산자**라고도 부른다.  

기계어와 어셈블리어 또한 명령어이기 때문에 연산 코드와 오퍼랜드로 구성되어 있다.  

> push rbp  
> mov rbp, rsp  
> mov DWORD PTR [rbp-4], 1  
> mov DWORD PTR [rbp-8], 2  
> mov edx, DWORD PTR [rbp-4]  
> mov eax, DWORD PTR [rbp-8]  
> add eax, edx  
> mov DWORD PTR [rbp-12], eax  
> mov eax, 0  
> pop rbp  
> ret  

여기서 앞의 push, mov, add, pop, ret 등은 연산 코드이고 그 뒤의 명령어는 오퍼랜드이다.  

### 오퍼랜드
오퍼랜드는 '연산에 사용할 데이터' 또는 '연산에 사용할 데이터가 저장된 위치'를 의미한다고 했다.  

그래서 오퍼랜드 필드에는 숫자와 문자 등을 나타내는 데이터 또는 메모리나 레지스터 주소가 올 수 있다.
- 다만 오퍼랜드 필드에는 숫자나 문자와 같이 연산에 사용할 데이터를 직접 명시하기보다는, 많은 경우 연산에 사용할 데이터가 저장된 위치, 즉 메모리 주소나 레지스터 이름이 담긴다. 그래서 오퍼랜드 필드를 **주소 필드**라고 부르기도 한다.  

오퍼 랜드는 명령어 안에 하나도 없을 수도 있고, 한 개만 있을 수도 있고, 두 개 또는 세 개 등 여러개가 있을수도 있다.
- 여기서 오퍼랜드가 하나도 없는 명령어를 **0-주소 명령어**라고 하고, 오퍼랜드가 하나인 명령어를 **1-주소 명령어**, 두 개인 명령어를 **2-주소 명령어**, 세 개인 명령어를 **3-주소 명령어**라고 한다.  
  - ret < 0-주소 명령어
  - push rbp < 1-주소 명령어
  - mov rbp, rsp < 2-주소 명령어

오퍼랜드 필드에는 연산에 사용할 데이터를 직접 명시하기보다는 많은 경우 데이터가 저장된 위치를 명시한다는 사실을 기억해두자.  

### 연산 코드
연산 코드는 '더해라', '빼라', '저장해라'와 같이 해당하는 부분이 연산 코드이다.  

연산 코드의 종류는 매우 많지만, 가장 기본적인 연산 코드 유형은 크게 4가지로 나눌 수 있다.
1. 데이터 전송
2. 산술/논리 연산
3. 제어 흐름 변경
4. 입출력 제어

이 4가지 유형 각각에 해당하는 대표적인 연산 코드를 알아보자. 단, 명령어의 종류와 생김새는 CPU마다 다르기 때문에 연산 코드의 종류와 생김새 또한 CPU마다 다르다.

이 다음의 연산 코드들은 대부분의 CPU가 공통으로 이해하는 대표적인 연산 코드의 종류 정도로만 이해하면 된다.  

**데이터 전송**
- MOVE: 데이터를 옮겨라
- STORE: 메모리에 저장하라
- LOAD(FETCH): 메모리에서 CPU로 데이터를 가져와라
- PUSH: 스택에 데이터를 저장하라
- POP: 스택의 최상단 데이터를 가져와라  

**산술/논리 연산**
- ADD / SUBTRACT / MULTIPLY / DIVIDE: 덧셈 / 뺄셈 / 곱셈 / 나눗셈을 수행하라
- INCREMENT / DECREMENT: 오퍼랜드에 1을 더하라 / 오퍼랜드에 1을 빼라
- AND / OR / NOT: AND / OR / NOT 연산을 수행하라
- COMPARE: 두 개의 숫자 또는 TRUE / FALSE 값을 비교하라  

**제어 흐름 변경**
- JUMP: 특정 주소로 실행 순서를 옮겨라
- CONDITIONAL JUMP: 조건에 부합할 때 특정 주소로 실행 순서를 옮겨라
- HALT: 프로그램의 실행을 멈춰라
- CALL: 되돌아올 주소를 저장한 채 특정 주소로 실행 순서를 옮겨라
- RETURN: CALL을 호출할 때 저장했던 주소로 돌아가라  

**입출력 제어**
- READ(INPUT): 특정 입출력 장치로부터 데이터를 읽어라
- WRITE(OUTPUT): 특정 입출력 장치로 데이터를 써라
- START IO: 입출력 장치를 시작하라
- TEST IO: 입출력 장치의 상태를 확인하라  

## 주소 지정 방식
